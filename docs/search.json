[
  {
    "objectID": "EDA.html",
    "href": "EDA.html",
    "title": "ST 558 Project 3: EDA",
    "section": "",
    "text": "Diabetes is a chronic disease in which individuals lose the ability to effectively regulate levels of glucose in the blood, and is generally characterized by either the body not making enough insulin or being unable to use the insulin that is made as effectively as needed.\n**Maybe a graph with the # of Americans with diabetes over the years cdc\nThis data is based on Behavioral Risk Factor Surveillance System (BRFSS) survey conducted on over 400,000 Americans by the CDC in 2015. This data set as been cleaned and contains 253,680 responses and has a target variable Diabetes_binary with 2 classes: 0 is for no diabetes and 1 is for prediabetes or diabetes.\nThe main important risk factors we will be investigating are: High Blood Pressure, High Cholesterol, Sex, Age, General Health score, Income, Physical Activity (physical activity in past 30 days - not including job), Fruits (consume fruit daily), Veggies (consume vegetables daily), Smoker (at least 100 cigarets in your life), Stroke (ever had a stroke), Heart Disease or Attack (coronary heart disease (CHD) or myocardial infarction (MI)), Heavy Alcohol Consumption (adult men having 14+ drinks/week and women having 7+ drinks/week), and Body Mass Index (BMI).\n[Click here for more information on the data.] (https://www.kaggle.com/datasets/alexteboul/diabetes-health-indicators-dataset/data)\n\n\n\n• describes the purpose of your EDA and ultimate goal of modeling.\n\n\n\nLoad libraries necessary for this analysis.\n\nlibrary(readr)\nlibrary(tidyr)\nlibrary(dplyr)\nlibrary(tidyverse)\nlibrary(ggplot2)"
  },
  {
    "objectID": "EDA.html#dataset",
    "href": "EDA.html#dataset",
    "title": "ST 558 Project 3: EDA",
    "section": "",
    "text": "Diabetes is a chronic disease in which individuals lose the ability to effectively regulate levels of glucose in the blood, and is generally characterized by either the body not making enough insulin or being unable to use the insulin that is made as effectively as needed.\n**Maybe a graph with the # of Americans with diabetes over the years cdc\nThis data is based on Behavioral Risk Factor Surveillance System (BRFSS) survey conducted on over 400,000 Americans by the CDC in 2015. This data set as been cleaned and contains 253,680 responses and has a target variable Diabetes_binary with 2 classes: 0 is for no diabetes and 1 is for prediabetes or diabetes.\nThe main important risk factors we will be investigating are: High Blood Pressure, High Cholesterol, Sex, Age, General Health score, Income, Physical Activity (physical activity in past 30 days - not including job), Fruits (consume fruit daily), Veggies (consume vegetables daily), Smoker (at least 100 cigarets in your life), Stroke (ever had a stroke), Heart Disease or Attack (coronary heart disease (CHD) or myocardial infarction (MI)), Heavy Alcohol Consumption (adult men having 14+ drinks/week and women having 7+ drinks/week), and Body Mass Index (BMI).\n[Click here for more information on the data.] (https://www.kaggle.com/datasets/alexteboul/diabetes-health-indicators-dataset/data)"
  },
  {
    "objectID": "EDA.html#eda-purpose",
    "href": "EDA.html#eda-purpose",
    "title": "ST 558 Project 3: EDA",
    "section": "",
    "text": "• describes the purpose of your EDA and ultimate goal of modeling."
  },
  {
    "objectID": "EDA.html#libraries",
    "href": "EDA.html#libraries",
    "title": "ST 558 Project 3: EDA",
    "section": "",
    "text": "Load libraries necessary for this analysis.\n\nlibrary(readr)\nlibrary(tidyr)\nlibrary(dplyr)\nlibrary(tidyverse)\nlibrary(ggplot2)"
  },
  {
    "objectID": "EDA.html#summarize",
    "href": "EDA.html#summarize",
    "title": "ST 558 Project 3: EDA",
    "section": "Summarize",
    "text": "Summarize\nUnderstand the data by checking the structure, any missing values, and the summary with respect to the relationships of variables to Diabetes.\n\n#display a few rows of the data, show the column structures and the class\nhead(diabetes_tb)\n\n# A tibble: 6 × 17\n  HighBP HighChol   BMI Smoker Stroke HeartDiseaseorAttack PhysActivity Fruits\n  &lt;fct&gt;  &lt;fct&gt;    &lt;dbl&gt; &lt;fct&gt;  &lt;fct&gt;  &lt;fct&gt;                &lt;fct&gt;        &lt;fct&gt; \n1 Yes    Yes         40 Yes    No     No                   No           No    \n2 No     No          25 Yes    No     No                   Yes          No    \n3 Yes    Yes         28 No     No     No                   No           Yes   \n4 Yes    No          27 No     No     No                   Yes          Yes   \n5 Yes    Yes         24 No     No     No                   Yes          Yes   \n6 Yes    Yes         25 Yes    No     No                   Yes          Yes   \n# ℹ 9 more variables: Veggies &lt;fct&gt;, HvyAlcoholConsump &lt;fct&gt;,\n#   AnyHealthcare &lt;fct&gt;, GenHlth &lt;fct&gt;, Sex &lt;fct&gt;, Age &lt;fct&gt;, Income &lt;fct&gt;,\n#   Diabetes &lt;fct&gt;, BadPhysHlthDays &lt;fct&gt;\n\nstr(diabetes_tb)\n\ntibble [253,680 × 17] (S3: tbl_df/tbl/data.frame)\n $ HighBP              : Factor w/ 2 levels \"No\",\"Yes\": 2 1 2 2 2 2 2 2 2 1 ...\n $ HighChol            : Factor w/ 2 levels \"No\",\"Yes\": 2 1 2 1 2 2 1 2 2 1 ...\n $ BMI                 : num [1:253680] 40 25 28 27 24 25 30 25 30 24 ...\n $ Smoker              : Factor w/ 2 levels \"No\",\"Yes\": 2 2 1 1 1 2 2 2 2 1 ...\n $ Stroke              : Factor w/ 2 levels \"No\",\"Yes\": 1 1 1 1 1 1 1 1 1 1 ...\n $ HeartDiseaseorAttack: Factor w/ 2 levels \"No\",\"Yes\": 1 1 1 1 1 1 1 1 2 1 ...\n $ PhysActivity        : Factor w/ 2 levels \"No\",\"Yes\": 1 2 1 2 2 2 1 2 1 1 ...\n $ Fruits              : Factor w/ 2 levels \"No\",\"Yes\": 1 1 2 2 2 2 1 1 2 1 ...\n $ Veggies             : Factor w/ 2 levels \"No\",\"Yes\": 2 1 1 2 2 2 1 2 2 2 ...\n $ HvyAlcoholConsump   : Factor w/ 2 levels \"No\",\"Yes\": 1 1 1 1 1 1 1 1 1 1 ...\n $ AnyHealthcare       : Factor w/ 2 levels \"No\",\"Yes\": 2 1 2 2 2 2 2 2 2 2 ...\n $ GenHlth             : Factor w/ 5 levels \"excellent\",\"very good\",..: 5 3 5 2 2 2 3 3 5 2 ...\n $ Sex                 : Factor w/ 2 levels \"Female\",\"Male\": 1 1 1 1 1 2 1 1 1 2 ...\n $ Age                 : Factor w/ 7 levels \"18-24\",\"25-34\",..: 5 4 5 6 6 6 5 6 5 5 ...\n $ Income              : Factor w/ 4 levels \"less than $10k\",..: 2 1 4 3 2 4 3 2 1 2 ...\n $ Diabetes            : Factor w/ 2 levels \"no diabetes\",..: 1 1 1 1 1 1 1 1 2 1 ...\n $ BadPhysHlthDays     : Factor w/ 31 levels \"0\",\"1\",\"2\",\"3\",..: 16 1 31 1 1 3 15 1 31 1 ...\n\nclass(diabetes_tb)\n\n[1] \"tbl_df\"     \"tbl\"        \"data.frame\"\n\n#determine if there is any missing data\ncolSums(is.na(diabetes_tb))\n\n              HighBP             HighChol                  BMI \n                   0                    0                    0 \n              Smoker               Stroke HeartDiseaseorAttack \n                   0                    0                    0 \n        PhysActivity               Fruits              Veggies \n                   0                    0                    0 \n   HvyAlcoholConsump        AnyHealthcare              GenHlth \n                   0                    0                    0 \n                 Sex                  Age               Income \n                   0                    0                    0 \n            Diabetes      BadPhysHlthDays \n                   0                    0 \n\n#print a table of proportions of each categorical variable with the diabetes response variable\ncollapse::descr(diabetes_tb, ~ Diabetes, cols = is.factor, compact = TRUE)\n\nDataset: diabetes_tb, 16 Variables, N = 253680\nGrouped by: Diabetes [2]\n                  N   Perc\nno diabetes  218334  86.07\ndiabetes      35346  13.93\n--------------------------------------------------------------------------------\nHighBP (factor): \nStatistics (N = 253680)\n                  N   Perc  Ndist\nno diabetes  218334  86.07      2\ndiabetes      35346  13.93      2\n\nTable (Freq Perc)\n     no diabetes  diabetes      Total\nNo     136109 62   8742 25  144851 57\nYes     82225 38  26604 75  108829 43\n--------------------------------------------------------------------------------\nHighChol (factor): \nStatistics (N = 253680)\n                  N   Perc  Ndist\nno diabetes  218334  86.07      2\ndiabetes      35346  13.93      2\n\nTable (Freq Perc)\n     no diabetes  diabetes      Total\nNo     134429 62  11660 33  146089 58\nYes     83905 38  23686 67  107591 42\n--------------------------------------------------------------------------------\nSmoker (factor): \nStatistics (N = 253680)\n                  N   Perc  Ndist\nno diabetes  218334  86.07      2\ndiabetes      35346  13.93      2\n\nTable (Freq Perc)\n     no diabetes  diabetes      Total\nNo     124228 57  17029 48  141257 56\nYes     94106 43  18317 52  112423 44\n--------------------------------------------------------------------------------\nStroke (factor): \nStatistics (N = 253680)\n                  N   Perc  Ndist\nno diabetes  218334  86.07      2\ndiabetes      35346  13.93      2\n\nTable (Freq Perc)\n     no diabetes    diabetes        Total\nNo   211310 96.8  32078 90.8  243388 95.9\nYes    7024  3.2   3268  9.2   10292  4.1\n--------------------------------------------------------------------------------\nHeartDiseaseorAttack (factor): \nStatistics (N = 253680)\n                  N   Perc  Ndist\nno diabetes  218334  86.07      2\ndiabetes      35346  13.93      2\n\nTable (Freq Perc)\n     no diabetes    diabetes        Total\nNo   202319 92.7  27468 77.7  229787 90.6\nYes   16015  7.3   7878 22.3   23893  9.4\n--------------------------------------------------------------------------------\nPhysActivity (factor): \nStatistics (N = 253680)\n                  N   Perc  Ndist\nno diabetes  218334  86.07      2\ndiabetes      35346  13.93      2\n\nTable (Freq Perc)\n     no diabetes  diabetes      Total\nYes    169633 78  22287 63  191920 76\nNo      48701 22  13059 37   61760 24\n--------------------------------------------------------------------------------\nFruits (factor): \nStatistics (N = 253680)\n                  N   Perc  Ndist\nno diabetes  218334  86.07      2\ndiabetes      35346  13.93      2\n\nTable (Freq Perc)\n     no diabetes  diabetes      Total\nYes    140205 64  20693 59  160898 63\nNo      78129 36  14653 41   92782 37\n--------------------------------------------------------------------------------\nVeggies (factor): \nStatistics (N = 253680)\n                  N   Perc  Ndist\nno diabetes  218334  86.07      2\ndiabetes      35346  13.93      2\n\nTable (Freq Perc)\n     no diabetes  diabetes      Total\nYes    179105 82  26736 76  205841 81\nNo      39229 18   8610 24   47839 19\n--------------------------------------------------------------------------------\nHvyAlcoholConsump (factor): \nStatistics (N = 253680)\n                  N   Perc  Ndist\nno diabetes  218334  86.07      2\ndiabetes      35346  13.93      2\n\nTable (Freq Perc)\n     no diabetes    diabetes        Total\nNo   204910 93.9  34514 97.6  239424 94.4\nYes   13424  6.1    832  2.4   14256  5.6\n--------------------------------------------------------------------------------\nAnyHealthcare (factor): \nStatistics (N = 253680)\n                  N   Perc  Ndist\nno diabetes  218334  86.07      2\ndiabetes      35346  13.93      2\n\nTable (Freq Perc)\n     no diabetes    diabetes        Total\nYes  207339 95.0  33924 96.0  241263 95.1\nNo    10995  5.0   1422  4.0   12417  4.9\n--------------------------------------------------------------------------------\nGenHlth (factor): \nStatistics (N = 253680)\n                  N   Perc  Ndist\nno diabetes  218334  86.07      5\ndiabetes      35346  13.93      5\n\nTable (Freq Perc)\n           no diabetes    diabetes       Total\nvery good   82703 37.9   6381 18.1  89084 35.1\ngood        62189 28.5  13457 38.1  75646 29.8\nexcellent   44159 20.2   1140  3.2  45299 17.9\nfair        21780 10.0   9790 27.7  31570 12.4\npoor         7503  3.4   4578 13.0  12081  4.8\n--------------------------------------------------------------------------------\nSex (factor): \nStatistics (N = 253680)\n                  N   Perc  Ndist\nno diabetes  218334  86.07      2\ndiabetes      35346  13.93      2\n\nTable (Freq Perc)\n        no diabetes  diabetes      Total\nFemale    123563 57  18411 52  141974 56\nMale       94771 43  16935 48  111706 44\n--------------------------------------------------------------------------------\nAge (factor): \nStatistics (N = 253680)\n                  N   Perc  Ndist\nno diabetes  218334  86.07      7\ndiabetes      35346  13.93      7\n\nTable (Freq Perc)\n       no diabetes     diabetes        Total\n55-64  54080 24.77   9996 28.28  64076 25.26\n65-74  44028 20.17  11699 33.10  55727 21.97\n45-54  41303 18.92   4830 13.66  46133 18.19\n75+    26731 12.24   6612 18.71  33343 13.14\n35-44  28303 12.96   1677  4.74  29980 11.82\n25-34  18267  8.37    454  1.28  18721  7.38\n18-24   5622  2.57     78  0.22   5700  2.25\n--------------------------------------------------------------------------------\nIncome (factor): \nStatistics (N = 253680)\n                  N   Perc  Ndist\nno diabetes  218334  86.07      4\ndiabetes      35346  13.93      4\n\nTable (Freq Perc)\n                no diabetes    diabetes       Total\nmore than $75k   83190 38.1   7195 20.4  90385 35.6\nless than $75k   69133 31.7  10556 29.9  79689 31.4\nless than $35k   58583 26.8  15212 43.0  73795 29.1\nless than $10k    7428  3.4   2383  6.7   9811  3.9\n--------------------------------------------------------------------------------\nDiabetes (factor): \nStatistics (N = 253680)\n                  N   Perc  Ndist\nno diabetes  218334  86.07      1\ndiabetes      35346  13.93      1\n\nTable (Freq Perc)\n             no diabetes   diabetes       Total\nno diabetes   218334 100      0   0  218334  86\ndiabetes           0   0  35346 100   35346  14\n--------------------------------------------------------------------------------\nBadPhysHlthDays (factor): \nStatistics (N = 253680)\n                  N   Perc  Ndist\nno diabetes  218334  86.07     31\ndiabetes      35346  13.93     31\n\nTable (Freq Perc)\n                no diabetes     diabetes         Total\n0              143312 65.64  16740 47.36  160052 63.09\n30              13674  6.26   5726 16.20   19400  7.65\n2               12736  5.83   2028  5.74   14764  5.82\n1               10200  4.67   1188  3.36   11388  4.49\n3                7206  3.30   1289  3.65    8495  3.35\n5                6308  2.89   1314  3.72    7622  3.00\n10               4305  1.97   1290  3.65    5595  2.21\n15               3621  1.66   1295  3.66    4916  1.94\n4                3779  1.73    763  2.16    4542  1.79\n7                3795  1.74    743  2.10    4538  1.79\n20               2356  1.08    917  2.59    3273  1.29\n14               2114  0.97    473  1.34    2587  1.02\n25                942  0.43    394  1.11    1336  0.53\n6                1048  0.48    282  0.80    1330  0.52\n... 17 Others    2938  1.35    904  2.56    3842  1.51\n\nSummary of Table Frequencies\n  no diabetes          diabetes         Total         \n Min.   :    19.0   Min.   :    3   Min.   :    22.0  \n 1st Qu.:    73.5   1st Qu.:   25   1st Qu.:    97.5  \n Median :   524.0   Median :  143   Median :   663.0  \n Mean   :  7043.0   Mean   : 1140   Mean   :  8183.2  \n 3rd Qu.:  3787.0   3rd Qu.: 1052   3rd Qu.:  4729.0  \n Max.   :143312.0   Max.   :16740   Max.   :160052.0  \n--------------------------------------------------------------------------------\n\n#View basic contingency summary tables\n##view the count of Diabetes by General Health and Sex\ntable(diabetes_tb$GenHlth, diabetes_tb$Diabetes, diabetes_tb$Sex, dnn=c(\"General Health\", \"Diabetes\", \"Sex\"))\n\n, , Sex = Female\n\n              Diabetes\nGeneral Health no diabetes diabetes\n     excellent       25106      449\n     very good       46723     3017\n     good            34507     6865\n     fair            12785     5529\n     poor             4442     2551\n\n, , Sex = Male\n\n              Diabetes\nGeneral Health no diabetes diabetes\n     excellent       19053      691\n     very good       35980     3364\n     good            27682     6592\n     fair             8995     4261\n     poor             3061     2027\n\nround(proportions(table(diabetes_tb$Age, diabetes_tb$Diabetes))*100,3)\n\n       \n        no diabetes diabetes\n  18-24       2.216    0.031\n  25-34       7.201    0.179\n  35-44      11.157    0.661\n  45-54      16.282    1.904\n  55-64      21.318    3.940\n  65-74      17.356    4.612\n  75+        10.537    2.606\n\n##view the mean BMI across Age groups by Sex and Diabetes\ndiabetes_tb |&gt;\n  group_by(Diabetes, Sex, Age) |&gt;\n  summarize(meanBMI = mean(BMI), .groups = 'drop') |&gt;\n  pivot_wider(names_from = Age, values_from = meanBMI)\n\n# A tibble: 4 × 9\n  Diabetes    Sex    `18-24` `25-34` `35-44` `45-54` `55-64` `65-74` `75+`\n  &lt;fct&gt;       &lt;fct&gt;    &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt;\n1 no diabetes Female    25.7    27.8    28.0    28.0    27.8    27.3  26.0\n2 no diabetes Male      26.3    28.1    28.9    29.0    28.5    28.0  26.7\n3 diabetes    Female    31.5    35.6    35.6    34.4    33.7    32.0  29.2\n4 diabetes    Male      27.2    32.1    33.7    33.0    32.1    31.1  28.7"
  },
  {
    "objectID": "EDA.html#visualize",
    "href": "EDA.html#visualize",
    "title": "ST 558 Project 3: EDA",
    "section": "Visualize",
    "text": "Visualize\nCreate plots to visualize the data.\n\n#Numerical Data\ndiabetes_tb |&gt;\n    ggplot(aes(x = BMI)) +\n    geom_density(color = \"black\", fill = \"dark green\") +\n    ggtitle(\"Distribution Plot for Body Mass Index (BMI)\") +\n    theme_minimal()\n\n\n\n\n\n\n\n#Categorical Data\nggplot(data = diabetes_tb |&gt;\n   group_by(GenHlth, Sex, Diabetes) |&gt;\n   summarize(count = n(), .groups = 'drop'), aes(x = Sex, y = count, fill = Diabetes)) +\n   geom_bar(stat = \"identity\", position = \"dodge\") +\n  facet_wrap(~ GenHlth) +\n  ggtitle(\"Diabetes count by General Health and Sex\") +\n  scale_fill_viridis_d() +\n  theme_light()\n\n\n\n\n\n\n\nggplot(data = diabetes_tb |&gt;\n  group_by(Diabetes, Sex, Age) |&gt;\n  summarize(meanBMI = mean(BMI), .groups = 'drop'), aes(x = Sex, y = meanBMI, fill = Diabetes)) +\n  geom_bar(stat = \"identity\", position = \"dodge\") +\n  facet_wrap(~ Age) +\n  ggtitle(\"Mean BMI across Age groups by Sex and Diabetes\") +\n  scale_fill_viridis_d() +\n  theme_light()\n\n\n\n\n\n\n\nggplot(data = diabetes_tb |&gt;\n  group_by(Diabetes, HighChol, HvyAlcoholConsump) |&gt;\n  summarize(count = n(), .groups = 'drop'), aes(x = HvyAlcoholConsump, y = count, fill = Diabetes)) +\n  geom_bar(stat = \"identity\") +\n  facet_wrap(~ HighChol) +\n  ggtitle(\"Diabetes count by High Cholesterol and Heavy Alcohol Consumption\") +\n  scale_fill_viridis_d() +\n  labs(x = \"Heavy Alcohol Consumption: adult men having 14+ drinks/week and women having 7+ drinks/week\")+\n  theme_minimal()\n\n\n\n\n\n\n\nggplot(data = diabetes_tb |&gt;\n  group_by(Diabetes, BadPhysHlthDays) |&gt;\n  summarize(count = n(), .groups = 'drop'), aes(x = BadPhysHlthDays, y = count, fill = Diabetes)) +\n  geom_bar(stat = \"identity\", position = \"dodge\") +\n  ggtitle(\"Diabetes count by Bad Physical Health Days\") +\n  labs(x = \"Bad Physical Health Days the last 30 Days\") +\n  scale_fill_viridis_d() +\n  theme_minimal()\n\n\n\n\n\n\n\nggplot(data = diabetes_tb |&gt;\n  group_by(Diabetes, Income) |&gt;\n  summarize(count = n(), .groups = 'drop'), aes(x = Income, y = count, fill = Diabetes)) +\n  geom_bar(stat = \"identity\") +\n  ggtitle(\"Diabetes count by Income group\") +\n  scale_fill_viridis_d() +\n  theme_minimal()"
  },
  {
    "objectID": "Modeling.html",
    "href": "Modeling.html",
    "title": "ST 558 Project 3: Modeling",
    "section": "",
    "text": "This data is based on Behavioral Risk Factor Surveillance System (BRFSS) survey conducted on over 400,000 Americans by the CDC in 2015. This data set as been cleaned and contains 253,680 responses and has a target variable Diabetes_binary with 2 classes: 0 is for no diabetes and 1 is for prediabetes or diabetes.\nThe main important risk factors we will be investigating are: High Blood Pressure, High Cholesterol, Sex, Age, General Health score, Income, Physical Activity (physical activity in past 30 days - not including job), Fruits (consume fruit daily), Veggies (consume vegetables daily), Smoker (at least 100 cigarets in your life), Stroke (ever had a stroke), Heart Disease or Attack (coronary heart disease (CHD) or myocardial infarction (MI)), Heavy Alcohol Consumption (adult men having 14+ drinks/week and women having 7+ drinks/week), and Body Mass Index (BMI)."
  },
  {
    "objectID": "Modeling.html#split-the-data",
    "href": "Modeling.html#split-the-data",
    "title": "ST 558 Project 3: Modeling",
    "section": "Split the Data",
    "text": "Split the Data\nLoad libraries necessary for this analysis.\n\nlibrary(readr)\nlibrary(tidyverse)\nlibrary(dplyr)\nlibrary(caret)\nlibrary(ranger) #Used for a faster implementation of Random Forests \n\nRead in the diabetes data using a relative path, and convert any variables to a factor if needed.\n\ndiabetes_tb &lt;- read_csv(\"data/diabetes_binary_health_indicators_BRFSS2015.csv\", show_col_types = FALSE) |&gt;\n                select(-c(CholCheck, MentHlth, DiffWalk, NoDocbcCost, Education, PhysHlth)) |&gt;\n                mutate(across(-c(Diabetes_binary, BMI, GenHlth, Sex, Age, Income), \\(x) factor(x, levels = c(\"0\",\"1\"), labels = c(\"No\", \"Yes\"))),\n                       Diabetes = factor(Diabetes_binary, levels = c(0:1), labels = c(\"no diabetes\", \"diabetes\")),\n                       GenHlth = factor(GenHlth, levels = c(1:5), labels = c(\"excellent\", \"very good\", \"good\", \"fair\", \"poor\")),\n                       Sex = factor(Sex, levels = c(\"0\", \"1\"), labels = c(\"Female\", \"Male\")),\n                       Age = factor(Age, levels = c(1:13), labels=c(\"18-24\", \"25-34\", \"25-34\", \"35-44\", \"35-44\", \"45-54\", \"45-54\", \"55-64\", \"55-64\", \"65-74\", \"65-74\", \"75+\", \"75+\")),\n                       Income = factor(Income, levels = c(1:8), labels = c(\"less than $10k\",\"less than $35k\", \"less than $35k\", \"less than $35k\", \"less than $35k\", \"less than $75k\", \"less than $75k\", \"more than $75k\" ))) |&gt;\n                select(-Diabetes_binary)\n\nCreate dummy columns corresponding to the categorical variables for use in our models.\n\nnewCols &lt;- dummyVars(~ Sex + Age + GenHlth + HighBP + HighChol + Income, data = diabetes_tb) |&gt;\npredict(newdata = diabetes_tb)\n#add those and remove originals\ndiabetes_tb &lt;- cbind(diabetes_tb, newCols)\n\n#add '-' to variables that have spaces in their levels in order to run the regression models\nlevels(diabetes_tb$Diabetes) &lt;- gsub(\"[^[:alnum:]]\", \"_\", levels(diabetes_tb$Diabetes))\nlevels(diabetes_tb$Income) &lt;- gsub(\"[^[:alnum:]]\", \"_\", levels(diabetes_tb$Income))\nlevels(diabetes_tb$GenHlth) &lt;- gsub(\"[^[:alnum:]]\", \"_\", levels(diabetes_tb$GenHlth))\n\nSplit your data into a training and test set with 70:30 ratio.\n\n#Set seed to get the same training and test set each time\nset.seed(99)\nsplit &lt;- createDataPartition(y = diabetes_tb$Diabetes, p = 0.7, list = FALSE)\nhead(split)\n\n     Resample1\n[1,]         2\n[2,]         6\n[3,]         7\n[4,]         9\n[5,]        10\n[6,]        12\n\n#Training set receives 70% of data\ntrain &lt;- diabetes_tb[split, ]\n#Testing set receives 30% of data\ntest &lt;- diabetes_tb[-split, ]"
  },
  {
    "objectID": "Modeling.html#logistic-regression-models",
    "href": "Modeling.html#logistic-regression-models",
    "title": "ST 558 Project 3: Modeling",
    "section": "Logistic Regression Models",
    "text": "Logistic Regression Models\nA logistic regression model is used for qualitative response variables and estimates the probability that the response belongs to a particular category. It is best used for a response variable with two classes and can only take on values on the real line which is perfect for binary variables. This data sets response variable is ‘Diabetes’ which has a binary classification of 0 for no diabetes and 1 for diabetes. Using maximum likelihood estimation, different values of the coefficient are tested through multiple iterations to optimize the best fit of log odds.\nWe will fit three models using this method and determine the model with the best fit.\n\n#Fit all predictor variables\nlogRegFit1 &lt;- train(Diabetes ~ Sex + Age + GenHlth + HighBP + HighChol + Income + PhysActivity + Fruits + Veggies + Smoker + Stroke + HeartDiseaseorAttack + BMI + HvyAlcoholConsump + AnyHealthcare,\n                  data = train,\n                  method = \"glm\",\n                  family = \"binomial\",\n                  metric = \"logLoss\",\n                  trControl = trainControl(method = \"cv\", number = 5,\n                                          classProbs = TRUE, summaryFunction = mnLogLoss))\nlogRegFit1\n\nGeneralized Linear Model \n\n177577 samples\n    15 predictor\n     2 classes: 'no_diabetes', 'diabetes' \n\nNo pre-processing\nResampling: Cross-Validated (5 fold) \nSummary of sample sizes: 142061, 142063, 142062, 142061, 142061 \nResampling results:\n\n  logLoss  \n  0.3183265\n\n#Fit main variables based on EDA\nlogRegFit2 &lt;- train(Diabetes ~ Sex + Age + GenHlth + HighBP + HighChol + Income + BMI,\n                  data = train,\n                  method = \"glm\",\n                  family = \"binomial\",\n                  metric = \"logLoss\",\n                  trControl = trainControl(method = \"cv\", number = 5,\n                                          classProbs = TRUE, summaryFunction = mnLogLoss))\nlogRegFit2\n\nGeneralized Linear Model \n\n177577 samples\n     7 predictor\n     2 classes: 'no_diabetes', 'diabetes' \n\nNo pre-processing\nResampling: Cross-Validated (5 fold) \nSummary of sample sizes: 142061, 142062, 142062, 142061, 142062 \nResampling results:\n\n  logLoss  \n  0.3201653\n\n#Fit using interactions\nlogRegFit3 &lt;- train(Diabetes ~ Sex*Age*BMI + GenHlth + HighBP + HighChol + Income,\n                  data = train,\n                  method = \"glm\",\n                  family = \"binomial\",\n                  metric = \"logLoss\",\n                  trControl = trainControl(method = \"cv\", number = 5,\n                                          classProbs = TRUE, summaryFunction = mnLogLoss))\nlogRegFit3\n\nGeneralized Linear Model \n\n177577 samples\n     7 predictor\n     2 classes: 'no_diabetes', 'diabetes' \n\nNo pre-processing\nResampling: Cross-Validated (5 fold) \nSummary of sample sizes: 142062, 142062, 142061, 142062, 142061 \nResampling results:\n\n  logLoss  \n  0.3197449\n\n\nBased on the logloss metric, the first logical regression fit has the lowest log loss, and thus the best model."
  },
  {
    "objectID": "Modeling.html#classification-tree",
    "href": "Modeling.html#classification-tree",
    "title": "ST 558 Project 3: Modeling",
    "section": "Classification Tree",
    "text": "Classification Tree\nA classification tree model is decision tree for binary response variables. The observed data is grouped based on the number of possible combinations of levels of the categorical variables. At each node of the tree, there is a condition involving a variable and a cut-off to divide the observations in two groups. Repeating this process for each variable creates a full tree, then the tree gets pruned to be the optimal model. Cross-validation is used to determine how many nodes the best model tree should have.\nWe will fit a classification tree with varying values of the complexity parameter and determine the best model.\n\nclassTreeFit &lt;- train(Diabetes ~ Sex + Age + GenHlth + HighBP + HighChol + Income + PhysActivity + Fruits + Veggies + Smoker + Stroke + HeartDiseaseorAttack + BMI + HvyAlcoholConsump + AnyHealthcare,\n                  data = train,\n                  method = \"rpart\",\n                  metric = \"logLoss\",\n                  trControl = trainControl(method = \"cv\", number = 5,\n                                          classProbs = TRUE, summaryFunction = mnLogLoss))\nclassTreeFit\n\nCART \n\n177577 samples\n    15 predictor\n     2 classes: 'no_diabetes', 'diabetes' \n\nNo pre-processing\nResampling: Cross-Validated (5 fold) \nSummary of sample sizes: 142062, 142062, 142062, 142061, 142061 \nResampling results across tuning parameters:\n\n  cp            logLoss  \n  0.0008487249  0.3558115\n  0.0020005658  0.3559563\n  0.0041304611  0.3855223\n\nlogLoss was used to select the optimal model using the smallest value.\nThe final value used for the model was cp = 0.0008487249.\n\n\nBased on the logloss metric and the lowest complexity parameter, the optimal classification tree model has a cp of 0.0008487249."
  },
  {
    "objectID": "Modeling.html#random-forest",
    "href": "Modeling.html#random-forest",
    "title": "ST 558 Project 3: Modeling",
    "section": "Random Forest",
    "text": "Random Forest\nA random forest model is a collection of decision trees. It uses the same idea as bagging and creates multiple trees based on bootstrap samples from the training data. There is no pruning involved, but each tree is grown until the number of observations in each node is no more than size m. So each individual tree will overfit the data in a different way and when we average the predictions from different trees, the overfitting will be removed. This model is a special case of bagging where m=p. There are 11 classification variables so m = 11\nWe will fit a a random forest model and determine the best model.\n\nm &lt;- c(1:11)\nsplit &lt;- c(\"extratrees\")\nmin.node &lt;- c(100)\nrfGrid &lt;- expand.grid(mtry = m, splitrule = split, min.node.size = min.node)\n\nrandForFit &lt;- train(Diabetes ~ Sex + Age + GenHlth + HighBP + HighChol + Income + PhysActivity + Veggies  + Stroke + HeartDiseaseorAttack + BMI,\n                  data = train,\n                  method = \"ranger\",\n                  metric = \"logLoss\",\n                  num.trees = 100,\n                  trControl = trainControl(method = \"cv\", number = 5,\n                                          classProbs = TRUE, summaryFunction = mnLogLoss),\n                  tuneGrid = rfGrid)\n\nrandForFit\n\nRandom Forest \n\n177577 samples\n    11 predictor\n     2 classes: 'no_diabetes', 'diabetes' \n\nNo pre-processing\nResampling: Cross-Validated (5 fold) \nSummary of sample sizes: 142061, 142062, 142062, 142062, 142061 \nResampling results across tuning parameters:\n\n  mtry  logLoss  \n   1    0.3569915\n   2    0.3337340\n   3    0.3259430\n   4    0.3223920\n   5    0.3209839\n   6    0.3201581\n   7    0.3197326\n   8    0.3194591\n   9    0.3194961\n  10    0.3194962\n  11    0.3197140\n\nTuning parameter 'splitrule' was held constant at a value of extratrees\n\nTuning parameter 'min.node.size' was held constant at a value of 100\nlogLoss was used to select the optimal model using the smallest value.\nThe final values used for the model were mtry = 8, splitrule = extratrees\n and min.node.size = 100.\n\n\nBased on the lowest logloss, the best random forest model had mtry = 8."
  }
]